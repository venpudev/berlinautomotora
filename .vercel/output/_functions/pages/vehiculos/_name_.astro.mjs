import { c as createComponent, e as createAstro, a as renderTemplate, r as renderComponent, m as maybeRenderHead, d as addAttribute } from '../../chunks/astro/server_Dvh0lmxh.mjs';
import 'kleur/colors';
import { $ as $$Layout } from '../../chunks/Layout_BnuGeWrr.mjs';
import { b as fetchAllVehicles, a as formatNameForURL, g as getCarsByIds, f as formatPrice, e as extractYearFromName } from '../../chunks/fetchSliders_C_IijAMM.mjs';
export { renderers } from '../../renderers.mjs';

var __freeze = Object.freeze;
var __defProp = Object.defineProperty;
var __template = (cooked, raw) => __freeze(__defProp(cooked, "raw", { value: __freeze(cooked.slice()) }));
var _a;
const $$Astro = createAstro();
const prerender = false;
const $$name = createComponent(async ($$result, $$props, $$slots) => {
  const Astro2 = $$result.createAstro($$Astro, $$props, $$slots);
  Astro2.self = $$name;
  const { name } = Astro2.params || {};
  const autos = await fetchAllVehicles();
  const foundVehicle = autos.find(
    (v) => formatNameForURL(v.name) === name
  );
  if (!foundVehicle) {
    throw new Error(`No se encontr\xF3 el veh\xEDculo con nombre: ${name}`);
  }
  const response = await getCarsByIds({ id: String(foundVehicle.id) });
  if (!response || !response.status) {
    throw new Error(`No se encontr\xF3 el veh\xEDculo con ID: ${foundVehicle.id}`);
  }
  const vehicle = response.data;
  const formattedPrice = formatPrice(vehicle.price);
  const vehicleYear = extractYearFromName(vehicle.name);
  const vehicleImages = vehicle.imageGallery && vehicle.imageGallery.length > 0 ? vehicle.imageGallery.map((img) => {
    if (typeof img === "string") return img;
    if (typeof img === "object" && img !== null) {
      return img.imageUrl || img.url || vehicle.imageUrl;
    }
    return vehicle.imageUrl;
  }).filter(Boolean) : [vehicle.imageUrl].filter(Boolean);
  const ogImage = vehicleImages[0];
  return renderTemplate(_a || (_a = __template(["", " <script>\n  document.addEventListener('DOMContentLoaded', function() {\n    const mainImage = document.getElementById('main-image');\n    const currentIndexSpan = document.getElementById('current-index');\n    const thumbnailBtns = document.querySelectorAll('.thumbnail-btn');\n    const scrollUpBtn = document.getElementById('scroll-up-btn');\n    const scrollDownBtn = document.getElementById('scroll-down-btn');\n    const thumbnailsContainer = document.getElementById('thumbnails-container');\n    \n    let currentImageIndex = 0;\n    let visibleThumbnails = 6; // N\xFAmero de miniaturas visibles\n    let startIndex = 0; // \xCDndice de inicio de las miniaturas visibles\n    \n    // Funci\xF3n para actualizar la imagen principal con efecto de transici\xF3n\n    function updateMainImage(index) {\n      if (mainImage && currentIndexSpan) {\n        const imageSrc = thumbnailBtns[index]?.getAttribute('data-image-src');\n        if (imageSrc && imageSrc !== mainImage.src) {\n          // Agregar clase de transici\xF3n\n          mainImage.style.opacity = '0.7';\n          mainImage.style.transform = 'scale(1.02)';\n          \n          // Cambiar la imagen despu\xE9s de un breve delay\n          setTimeout(() => {\n            mainImage.src = imageSrc;\n            currentImageIndex = index;\n            currentIndexSpan.textContent = index + 1;\n            \n            // Restaurar opacidad y escala\n            mainImage.style.opacity = '1';\n            mainImage.style.transform = 'scale(1)';\n          }, 150);\n          \n          // Actualizar el estado activo de las miniaturas\n          thumbnailBtns.forEach((btn, i) => {\n            btn.classList.remove('border-blue-500', 'ring-2', 'ring-blue-200');\n            btn.classList.add('border-gray-100');\n            \n            if (i === index) {\n              btn.classList.remove('border-gray-100');\n              btn.classList.add('border-blue-500', 'ring-2', 'ring-blue-200');\n            }\n          });\n        }\n      }\n    }\n    \n    // Funci\xF3n para actualizar la visibilidad de las miniaturas\n    function updateThumbnailsVisibility() {\n      thumbnailBtns.forEach((btn, index) => {\n        if (index >= startIndex && index < startIndex + visibleThumbnails) {\n          btn.classList.remove('hidden');\n        } else {\n          btn.classList.add('hidden');\n        }\n      });\n      \n      // Actualizar estado de los botones de scroll\n      if (scrollUpBtn) {\n        scrollUpBtn.disabled = startIndex === 0;\n      }\n      if (scrollDownBtn) {\n        scrollDownBtn.disabled = startIndex + visibleThumbnails >= thumbnailBtns.length;\n      }\n    }\n    \n    // Event listeners para las miniaturas\n    thumbnailBtns.forEach((btn, index) => {\n      btn.addEventListener('click', function() {\n        updateMainImage(index);\n      });\n    });\n    \n    // Event listeners para los botones de scroll\n    if (scrollUpBtn) {\n      scrollUpBtn.addEventListener('click', function() {\n        if (startIndex > 0) {\n          startIndex--;\n          updateThumbnailsVisibility();\n        }\n      });\n    }\n    \n    if (scrollDownBtn) {\n      scrollDownBtn.addEventListener('click', function() {\n        if (startIndex + visibleThumbnails < thumbnailBtns.length) {\n          startIndex++;\n          updateThumbnailsVisibility();\n        }\n      });\n    }\n    \n    // Inicializar\n    updateThumbnailsVisibility();\n    \n    // Navegaci\xF3n con teclado\n    document.addEventListener('keydown', function(e) {\n      if (e.key === 'ArrowLeft' && currentImageIndex > 0) {\n        updateMainImage(currentImageIndex - 1);\n      } else if (e.key === 'ArrowRight' && currentImageIndex < thumbnailBtns.length - 1) {\n        updateMainImage(currentImageIndex + 1);\n      }\n    });\n  });\n<\/script> "])), renderComponent($$result, "Layout", $$Layout, { "title": `${vehicle.name} - Berlin Automotora`, "description": `${vehicle.name} - ${formattedPrice}`, "image": ogImage, "data-astro-cid-ajdznhba": true }, { "default": async ($$result2) => renderTemplate` ${maybeRenderHead()}<main class="md:w-7xl mx-auto py-[80px] md:py-[120px] px-5 md:px-10" data-astro-cid-ajdznhba> <nav class="text-sm text-gray-600 py-3" data-astro-cid-ajdznhba> <a href="/" class="hover:text-blue-600" data-astro-cid-ajdznhba>Inicio</a> <span class="mx-2" data-astro-cid-ajdznhba>></span> <a href="/catalogo" class="hover:text-blue-600" data-astro-cid-ajdznhba>Vehículos</a> <span class="mx-2" data-astro-cid-ajdznhba>></span> <span class="text-gray-900" data-astro-cid-ajdznhba>${vehicle.name}</span> </nav> <div class="grid grid-cols-1 lg:grid-cols-3 gap-8" data-astro-cid-ajdznhba> <div class="lg:col-span-2" data-astro-cid-ajdznhba> <div class="bg-white rounded-lg shadow-sm border-gray-200 border p-4 mb-6" data-astro-cid-ajdznhba> <div class="flex gap-4" data-astro-cid-ajdznhba> ${vehicleImages.length > 1 && renderTemplate`<div class="flex flex-col w-20 md:w-24" data-astro-cid-ajdznhba> ${vehicleImages.length > 6 && renderTemplate`<button id="scroll-up-btn" class="w-full bg-white hover:bg-gray-50 text-gray-700 py-2 rounded-t border border-gray-100 transition-colors shadow-sm mb-1 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Ver imágenes anteriores" data-astro-cid-ajdznhba> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-astro-cid-ajdznhba> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" data-astro-cid-ajdznhba></path> </svg> </button>`} <div class="flex flex-col gap-2 thumbnail-viewport" id="thumbnails-container" data-astro-cid-ajdznhba> ${vehicleImages.map((image, index) => renderTemplate`<button type="button"${addAttribute(`thumbnail-btn w-full h-16 md:h-20 rounded border-2 transition-all duration-200 overflow-hidden flex-shrink-0 ${index === 0 ? "border-blue-500 ring-2 ring-blue-200" : "border-gray-100 hover:border-blue-300"} ${index >= 6 ? "hidden" : ""}`, "class")}${addAttribute(index, "data-index")}${addAttribute(image, "data-image-src")}${addAttribute(`Ver imagen ${index + 1}`, "aria-label")} data-astro-cid-ajdznhba> <img${addAttribute(image, "src")}${addAttribute(`${vehicle.name} - Miniatura ${index + 1}`, "alt")} class="w-full h-full object-cover" data-astro-cid-ajdznhba> </button>`)} </div> ${vehicleImages.length > 6 && renderTemplate`<button id="scroll-down-btn" class="w-full bg-white hover:bg-gray-50 text-gray-700 py-2 rounded-b border border-gray-100 transition-colors shadow-sm mt-1 flex items-center justify-center disabled:opacity-50 disabled:cursor-not-allowed" aria-label="Ver más imágenes" data-astro-cid-ajdznhba> <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24" data-astro-cid-ajdznhba> <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" data-astro-cid-ajdznhba></path> </svg> </button>`} </div>`} <div class="relative flex-1" data-astro-cid-ajdznhba> <img id="main-image"${addAttribute(vehicleImages[0], "src")}${addAttribute(`${vehicle.name} - Berlin Automotora`, "alt")} class="w-full h-full object-cover rounded-lg cursor-zoom-in transition-all duration-500 ease-in-out" data-astro-cid-ajdznhba> ${vehicleImages.length > 1 && renderTemplate`<div class="absolute top-4 right-4 bg-black bg-opacity-50 text-white px-2 py-1 rounded text-sm" data-astro-cid-ajdznhba> <span id="current-index" data-astro-cid-ajdznhba>1</span> / ${vehicleImages.length} </div>`} </div> </div> </div> <div class="bg-white rounded-lg shadow-sm border-gray-200 border p-6 mb-6" data-astro-cid-ajdznhba> <h2 class="text-2xl font-bold mb-4 text-gray-900" data-astro-cid-ajdznhba>Características</h2> <div class="grid grid-cols-2 md:grid-cols-3 gap-4" data-astro-cid-ajdznhba> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-gray-400" data-astro-cid-ajdznhba>📅</span> <div data-astro-cid-ajdznhba> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Año</p> <p${addAttribute([
    "font-semibold",
    { "text-red-500": !vehicleYear }
  ], "class:list")} data-astro-cid-ajdznhba> ${vehicleYear || "N/A"} </p> </div> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-gray-400" data-astro-cid-ajdznhba>🚗</span> <div data-astro-cid-ajdznhba> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Kilometraje</p> <p class="font-semibold" data-astro-cid-ajdznhba>${vehicle.miles?.toLocaleString() || "N/A"} km</p> </div> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-gray-400" data-astro-cid-ajdznhba>⛽</span> <div data-astro-cid-ajdznhba> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Combustible</p> <p class="font-semibold" data-astro-cid-ajdznhba>${vehicle.fuelType || "N/A"}</p> </div> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-gray-400" data-astro-cid-ajdznhba>⚙️</span> <div data-astro-cid-ajdznhba> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Transmisión</p> <p class="font-semibold" data-astro-cid-ajdznhba>${vehicle.transmission || "N/A"}</p> </div> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-gray-400" data-astro-cid-ajdznhba>📍</span> <div data-astro-cid-ajdznhba> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Ubicación</p> <p class="font-semibold" data-astro-cid-ajdznhba>${vehicle.vendedor?.sucursal || "No especificada"}</p> </div> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-gray-400" data-astro-cid-ajdznhba>🏷️</span> <div data-astro-cid-ajdznhba> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Estado</p> <p${addAttribute(`font-semibold ${vehicle.available ? "text-green-600" : "text-red-600"}`, "class")} data-astro-cid-ajdznhba> ${vehicle.available ? "Disponible" : "Vendido"} </p> </div> </div> </div> </div> <div class="bg-white rounded-lg shadow-sm border-gray-200 border p-6" data-astro-cid-ajdznhba> <h2 class="text-2xl font-bold mb-4 text-gray-900" data-astro-cid-ajdznhba>Descripción</h2> <div class="prose max-w-none text-gray-700" data-astro-cid-ajdznhba> <p class="mb-4" data-astro-cid-ajdznhba> ${vehicle.description || `Este ${vehicle.name} es una excelente opci\xF3n para quienes buscan un veh\xEDculo confiable y con gran desempe\xF1o. Con ${vehicle.miles?.toLocaleString()} kil\xF3metros recorridos y motor ${vehicle.fuelType}, representa una oportunidad \xFAnica en el mercado.`} </p> <p data-astro-cid-ajdznhba>
El vehículo cuenta con transmisión ${vehicle.transmission} y se encuentra en excelentes condiciones.
              Ideal para uso familiar o trabajo, combina comodidad, seguridad y eficiencia en un solo paquete.
</p> </div> </div> </div> <div class="lg:col-span-1" data-astro-cid-ajdznhba> <div class="sticky top-28" data-astro-cid-ajdznhba> <div class="bg-white rounded-lg shadow-sm border-gray-200 border p-6 mb-6" data-astro-cid-ajdznhba> <div class="mb-4" data-astro-cid-ajdznhba> <h1 class="text-2xl font-bold text-gray-900 mb-2" data-astro-cid-ajdznhba>${vehicle.name}</h1> ${vehicle.available ? renderTemplate`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800" data-astro-cid-ajdznhba>
✓ Disponible
</span>` : renderTemplate`<span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800" data-astro-cid-ajdznhba>
✗ Vendido
</span>`} </div> <div class="mb-6" data-astro-cid-ajdznhba> <p class="text-3xl font-bold text-gray-900" data-astro-cid-ajdznhba>${formattedPrice}</p> <p class="text-sm text-gray-600" data-astro-cid-ajdznhba>Precio final</p> </div> <a href="/contacto"${addAttribute(`w-full font-bold py-3 px-4 rounded-lg transition-colors text-center block ${vehicle.available ? "bg-green-600 hover:bg-green-700 text-white" : "bg-gray-400 text-gray-600 cursor-not-allowed"}`, "class")} data-astro-cid-ajdznhba>
Contactar vendedor
</a> </div> <div class="bg-white rounded-lg shadow-sm border-gray-200 border p-6" data-astro-cid-ajdznhba> <h3 class="text-lg font-bold mb-4" data-astro-cid-ajdznhba>Medios de pago</h3> <div class="space-y-3" data-astro-cid-ajdznhba> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-green-500" data-astro-cid-ajdznhba>✓</span> <span class="text-sm" data-astro-cid-ajdznhba>Efectivo</span> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-green-500" data-astro-cid-ajdznhba>✓</span> <span class="text-sm" data-astro-cid-ajdznhba>Transferencia bancaria</span> </div> <div class="flex items-center space-x-2" data-astro-cid-ajdznhba> <span class="text-green-500" data-astro-cid-ajdznhba>✓</span> <span class="text-sm" data-astro-cid-ajdznhba>Financiamiento disponible</span> </div> </div> </div> </div> </div> </div> </main> ` }));
}, "/Users/matias/Repositorios/berlinautomotora/src/pages/vehiculos/[name].astro", void 0);

const $$file = "/Users/matias/Repositorios/berlinautomotora/src/pages/vehiculos/[name].astro";
const $$url = "/vehiculos/[name]";

const _page = /*#__PURE__*/Object.freeze(/*#__PURE__*/Object.defineProperty({
  __proto__: null,
  default: $$name,
  file: $$file,
  prerender,
  url: $$url
}, Symbol.toStringTag, { value: 'Module' }));

const page = () => _page;

export { page };
